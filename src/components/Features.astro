---
import { useTranslations, defaultLang, type Language } from '../i18n';

interface Props {
  lang?: Language;
}

const { lang = defaultLang } = Astro.props;
const t = useTranslations(lang);

const features = [
  {
    icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>`,
    titleKey: 'features.missionControl.title' as const,
    descriptionKey: 'features.missionControl.description' as const
  },
  {
    icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"/></svg>`,
    titleKey: 'features.spacesNavigation.title' as const,
    descriptionKey: 'features.spacesNavigation.description' as const
  },
  {
    icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35M11 8v6M8 11h6"/></svg>`,
    titleKey: 'features.dynamicZoom.title' as const,
    descriptionKey: 'features.dynamicZoom.description' as const
  },
  {
    icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 5v14M5 12l7-7 7 7"/></svg>`,
    titleKey: 'features.invertedScroll.title' as const,
    descriptionKey: 'features.invertedScroll.description' as const
  },
  {
    icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/></svg>`,
    titleKey: 'features.autoStart.title' as const,
    descriptionKey: 'features.autoStart.description' as const
  },
  {
    icon: `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="4"/><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/></svg>`,
    titleKey: 'features.darkMode.title' as const,
    descriptionKey: 'features.darkMode.description' as const
  }
];
---

<section class="features section" id="features">
  <div class="container">
    <div class="features__header reveal">
      <span class="features__label">{t('features.label')}</span>
      <h2 class="features__title">
        {t('features.title')} 
        <span class="text-gradient">{t('features.titleHighlight')}</span>
      </h2>
      <p class="features__description">
        {t('features.description')}
      </p>
    </div>
    
    <div class="features__grid">
      {features.map((feature, index) => (
        <article class="feature-card reveal" style={`animation-delay: ${index * 0.1}s`}>
          <div class="feature-card__icon" set:html={feature.icon} />
          <h3 class="feature-card__title">{t(feature.titleKey)}</h3>
          <p class="feature-card__description">{t(feature.descriptionKey)}</p>
        </article>
      ))}
    </div>
  </div>
</section>

<style>
.features { background: var(--color-bg-secondary); position: relative; }
.features::before { content: ''; position: absolute; top: 0; left: 50%; transform: translateX(-50%); width: 80%; height: 1px; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent); }
.features__header { text-align: center; max-width: 600px; margin: 0 auto var(--space-16); }
.features__label { display: inline-block; padding: var(--space-2) var(--space-4); background: var(--color-bg-glass); border: 1px solid rgba(255,255,255,0.08); border-radius: var(--radius-full); font-size: var(--text-sm); color: var(--color-primary); font-weight: 500; margin-bottom: var(--space-4); }
.features__title { margin-bottom: var(--space-4); }
.features__description { font-size: var(--text-lg); }
.features__grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-6); }
.feature-card { padding: var(--space-8); background: var(--color-bg-card); border: 1px solid rgba(255,255,255,0.05); border-radius: var(--radius-xl); transition: all var(--transition-base); }
.feature-card:hover { background: rgba(26,26,37,0.9); border-color: rgba(34,211,238,0.3); transform: translateY(-4px); box-shadow: 0 20px 40px -15px rgba(34,211,238,0.2); }
.feature-card__icon { width: 48px; height: 48px; padding: var(--space-3); background: var(--gradient-primary); border-radius: var(--radius-lg); color: white; margin-bottom: var(--space-4); }
.feature-card__icon :global(svg) { width: 100%; height: 100%; }
.feature-card__title { font-size: var(--text-lg); font-weight: 600; margin-bottom: var(--space-3); color: var(--color-text-primary); }
.feature-card__description { font-size: var(--text-sm); color: var(--color-text-secondary); line-height: 1.7; }
@media (max-width: 1024px) { .features__grid { grid-template-columns: repeat(2, 1fr); } }
@media (max-width: 640px) { .features__grid { grid-template-columns: 1fr; } }
</style>
